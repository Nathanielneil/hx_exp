# åœ°é¢æ•ˆåº”å®éªŒæŒ‡å—

## ğŸ¯ å®éªŒç›®çš„

æœ¬å®éªŒæ—¨åœ¨è¯„ä¼°ä¸åŒæ§åˆ¶ç®—æ³•ï¼ˆPIDã€UDEã€ADRCï¼‰åœ¨æ— äººæœºé™è½è¿‡ç¨‹ä¸­åº”å¯¹åœ°é¢æ•ˆåº”çš„æ€§èƒ½å·®å¼‚ã€‚

## ğŸ“– åœ°é¢æ•ˆåº”ç®€ä»‹

**åœ°é¢æ•ˆåº”ï¼ˆGround Effectï¼‰**æ˜¯æŒ‡æ— äººæœºåœ¨æ¥è¿‘åœ°é¢æ—¶ï¼Œèºæ—‹æ¡¨ä¸‹æ´—æ°”æµé‡åˆ°åœ°é¢åå°„ï¼Œå¯¼è‡´ï¼š
- **å‡åŠ›å¢åŠ **: æœ‰æ•ˆå‡åŠ›å¢å¤§ï¼Œæ— äººæœºæ›´å®¹æ˜“"æµ®èµ·"
- **é˜»åŠ›å‡å°**: è¯±å¯¼é˜»åŠ›é™ä½
- **æ§åˆ¶æ•æ„Ÿæ€§å˜åŒ–**: æ§åˆ¶å“åº”å¯èƒ½å˜å¾—ä¸ç¨³å®š
- **æ°´å¹³æ¼‚ç§»**: ç”±äºæ°”æµä¸å‡åŒ€å¯èƒ½å¯¼è‡´æ°´å¹³ä½ç½®åç§»

é€šå¸¸åœ¨é«˜åº¦å°äºèºæ—‹æ¡¨ç›´å¾„1-2å€æ—¶ï¼ˆçº¦1.5ç±³ä»¥ä¸‹ï¼‰å¼€å§‹æ˜¾ç°ã€‚

## ğŸ”¬ è¯„ä»·æŒ‡æ ‡

### ä¸»è¦æ€§èƒ½æŒ‡æ ‡

1. **æ°´å¹³ä½ç½®ç¨³å®šæ€§**
   - `avg_horizontal_drift`: å¹³å‡æ°´å¹³æ¼‚ç§»è·ç¦»
   - `max_horizontal_drift`: æœ€å¤§æ°´å¹³æ¼‚ç§»è·ç¦»
   - `final_landing_error`: æœ€ç»ˆé™è½ä½ç½®è¯¯å·®

2. **é«˜åº¦æ§åˆ¶ç²¾åº¦**
   - `avg_height_error`: å¹³å‡é«˜åº¦è·Ÿè¸ªè¯¯å·®
   - `max_height_error`: æœ€å¤§é«˜åº¦è·Ÿè¸ªè¯¯å·®
   - `height_error_std`: é«˜åº¦è¯¯å·®æ ‡å‡†å·®

3. **é€Ÿåº¦æ§åˆ¶ç¨³å®šæ€§**
   - `avg_velocity_error`: å¹³å‡å‚ç›´é€Ÿåº¦è¯¯å·®
   - `velocity_error_std`: å‚ç›´é€Ÿåº¦è¯¯å·®æ ‡å‡†å·®

4. **æ§åˆ¶è¾“å‡ºå¹³æ»‘æ€§**
   - `roll_cmd_std`: Rollæ§åˆ¶å‘½ä»¤æ ‡å‡†å·®
   - `pitch_cmd_std`: Pitchæ§åˆ¶å‘½ä»¤æ ‡å‡†å·®
   - `throttle_cmd_std`: æ²¹é—¨æ§åˆ¶å‘½ä»¤æ ‡å‡†å·®

### åœ°é¢æ•ˆåº”ä¸“é¡¹æŒ‡æ ‡

5. **åœ°é¢æ•ˆåº”åŒºåŸŸæ€§èƒ½**ï¼ˆé«˜åº¦â‰¤1.5mï¼‰
   - `ground_effect_horizontal_drift`: åœ°é¢æ•ˆåº”åŒºåŸŸæ°´å¹³æ¼‚ç§»
   - `ground_effect_height_error`: åœ°é¢æ•ˆåº”åŒºåŸŸé«˜åº¦è¯¯å·®
   - `ground_effect_roll_variation`: åœ°é¢æ•ˆåº”åŒºåŸŸRollæ§åˆ¶å˜åŒ–
   - `ground_effect_pitch_variation`: åœ°é¢æ•ˆåº”åŒºåŸŸPitchæ§åˆ¶å˜åŒ–

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€å®éªŒ

```bash
# 1. å¯åŠ¨AirSimç¯å¢ƒ
cd /home/ubuntu/NGW/data/code_hx/src/hx_exp_rc
./scripts/start_airsim.sh

# 2. è¿è¡Œåœ°é¢æ•ˆåº”å®éªŒï¼ˆé»˜è®¤å‚æ•°ï¼‰
roslaunch hx_demo ground_effect_experiment.launch

# 3. æŸ¥çœ‹ç»“æœ
# æ•°æ®ä¿å­˜åœ¨: hx_demo/ground_effect_data/
# åŒ…å«CSVæ•°æ®æ–‡ä»¶ã€åˆ†ææŠ¥å‘Šå’Œå¯¹æ¯”å›¾è¡¨
```

### è‡ªå®šä¹‰å‚æ•°å®éªŒ

```bash
# æ…¢é€Ÿé™è½å®éªŒï¼ˆæ›´æ˜æ˜¾çš„åœ°é¢æ•ˆåº”ï¼‰
roslaunch hx_demo ground_effect_experiment.launch \
  takeoff_height:=4.0 \
  landing_speed:=0.3 \
  hover_duration:=8.0

# å¿«é€Ÿé™è½å®éªŒï¼ˆæ›´å…·æŒ‘æˆ˜æ€§ï¼‰
roslaunch hx_demo ground_effect_experiment.launch \
  takeoff_height:=3.0 \
  landing_speed:=0.8 \
  hover_duration:=3.0

# ä»…æµ‹è¯•ç‰¹å®šæ§åˆ¶å™¨ï¼ˆPID=1, UDE=2, ADRC=3ï¼‰
roslaunch hx_demo ground_effect_experiment.launch \
  controllers:="[1]" \
  auto_repeat:=false

# è‡ªå®šä¹‰æ•°æ®ä¿å­˜è·¯å¾„
roslaunch hx_demo ground_effect_experiment.launch \
  data_dir:="/path/to/your/data"
```

## ğŸ“Š é¢„å®šä¹‰å®éªŒåœºæ™¯

ä½¿ç”¨é…ç½®æ–‡ä»¶è¿è¡Œé¢„å®šä¹‰åœºæ™¯ï¼š

```bash
# æ…¢é€Ÿé™è½åœºæ™¯
rosparam load $(rospack find hx_demo)/config/ground_effect_scenarios.yaml slow_landing
roslaunch hx_demo ground_effect_experiment.launch \
  takeoff_height:=4.0 landing_speed:=0.3 hover_duration:=8.0

# ç²¾å¯†æµ‹è¯•åœºæ™¯
rosparam load $(rospack find hx_demo)/config/ground_effect_scenarios.yaml precision_test
roslaunch hx_demo ground_effect_experiment.launch \
  takeoff_height:=3.0 landing_speed:=0.2 hover_duration:=10.0

# é²æ£’æ€§æµ‹è¯•åœºæ™¯
rosparam load $(rospack find hx_demo)/config/ground_effect_scenarios.yaml robustness_test
roslaunch hx_demo ground_effect_experiment.launch \
  takeoff_height:=4.0 landing_speed:=0.7 hover_duration:=2.0
```

## ğŸ“ˆ å®éªŒæµç¨‹

### è‡ªåŠ¨åŒ–å®éªŒæµç¨‹

1. **èµ·é£é˜¶æ®µ**: ä½¿ç”¨æŒ‡å®šæ§åˆ¶å™¨èµ·é£åˆ°ç›®æ ‡é«˜åº¦
2. **æ‚¬åœé˜¶æ®µ**: åœ¨ç›®æ ‡é«˜åº¦æ‚¬åœç¨³å®šï¼Œæ¶ˆé™¤èµ·é£æ‰°åŠ¨
3. **é™è½é˜¶æ®µ**: ä»¥æ’å®šé€Ÿåº¦ç¼“æ…¢é™è½ï¼Œè®°å½•æ‰€æœ‰æ•°æ®
4. **åˆ†æé˜¶æ®µ**: é™è½å®Œæˆååˆ†ææ•°æ®å¹¶ç”ŸæˆæŠ¥å‘Š
5. **åˆ‡æ¢æ§åˆ¶å™¨**: è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ§åˆ¶å™¨é‡å¤å®éªŒ

### å®éªŒå‚æ•°å»ºè®®

| åœºæ™¯ | èµ·é£é«˜åº¦ | é™è½é€Ÿåº¦ | æ‚¬åœæ—¶é—´ | é€‚ç”¨åœºåˆ |
|------|----------|----------|----------|----------|
| **æ ‡å‡†æµ‹è¯•** | 3.0m | 0.5m/s | 5s | å¸¸è§„å¯¹æ¯” |
| **ç²¾å¯†æµ‹è¯•** | 3.0m | 0.2m/s | 10s | é«˜ç²¾åº¦è¦æ±‚ |
| **é²æ£’æ€§æµ‹è¯•** | 4.0m | 0.8m/s | 2s | æŒ‘æˆ˜æ€§ç¯å¢ƒ |
| **åœ°é¢æ•ˆåº”å¼ºåŒ–** | 2.0m | 0.4m/s | 6s | çªå‡ºåœ°é¢æ•ˆåº” |

## ğŸ“‹ ç»“æœåˆ†æ

### è¾“å‡ºæ–‡ä»¶

å®éªŒå®Œæˆåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
ground_effect_data/
â”œâ”€â”€ PID_landing_data_20231214_143022.csv      # PIDæ§åˆ¶å™¨æ•°æ®
â”œâ”€â”€ UDE_landing_data_20231214_143155.csv      # UDEæ§åˆ¶å™¨æ•°æ®  
â”œâ”€â”€ ADRC_landing_data_20231214_143328.csv     # ADRCæ§åˆ¶å™¨æ•°æ®
â”œâ”€â”€ ground_effect_report_20231214_143500.txt  # ç»¼åˆåˆ†ææŠ¥å‘Š
â””â”€â”€ comparison_plots_20231214_143500.png      # å¯¹æ¯”å›¾è¡¨
```

### æ•°æ®æ–‡ä»¶æ ¼å¼

CSVæ–‡ä»¶åŒ…å«ä»¥ä¸‹å­—æ®µï¼š
- `timestamp`: æ—¶é—´æˆ³
- `controller`: æ§åˆ¶å™¨åç§°
- `target_height, actual_height`: ç›®æ ‡/å®é™…é«˜åº¦
- `target_x/y, actual_x/y`: ç›®æ ‡/å®é™…æ°´å¹³ä½ç½®
- `velocity_x/y/z`: ä¸‰è½´é€Ÿåº¦
- `roll_cmd, pitch_cmd, throttle_cmd`: æ§åˆ¶å‘½ä»¤
- `horizontal_drift`: æ°´å¹³æ¼‚ç§»è·ç¦»
- `height_error`: é«˜åº¦è¯¯å·®
- `velocity_z_error`: å‚ç›´é€Ÿåº¦è¯¯å·®

### åˆ†ææŠ¥å‘Šå†…å®¹

1. **å®éªŒå‚æ•°è®°å½•**
2. **å„æ§åˆ¶å™¨è¯¦ç»†æ€§èƒ½æŒ‡æ ‡**
3. **å¯¹æ¯”åˆ†æå’Œæ’å**
4. **æœ€ä½³æ§åˆ¶å™¨æ¨è**

## ğŸ¯ é¢„æœŸç»“æœåˆ†æ

### å…¸å‹æ§åˆ¶å™¨ç‰¹æ€§

**PIDæ§åˆ¶å™¨**
- âœ… å“åº”é€Ÿåº¦å¿«ï¼Œè°ƒèŠ‚ç®€å•
- âŒ åœ°é¢æ•ˆåº”ä¸‹å¯èƒ½æŒ¯è¡
- ğŸ“Š é¢„æœŸï¼šä¸­ç­‰çš„æ°´å¹³ç¨³å®šæ€§ï¼Œè¾ƒå¿«çš„å“åº”

**UDEæ§åˆ¶å™¨**  
- âœ… æ‰°åŠ¨ä¼°è®¡èƒ½åŠ›å¼º
- âœ… å¯¹åœ°é¢æ•ˆåº”æ‰°åŠ¨æœ‰ä¸€å®šè¡¥å¿
- ğŸ“Š é¢„æœŸï¼šè¾ƒå¥½çš„åœ°é¢æ•ˆåº”æŠ‘åˆ¶èƒ½åŠ›

**ADRCæ§åˆ¶å™¨**
- âœ… è‡ªæŠ—æ‰°èƒ½åŠ›æœ€å¼º
- âœ… ç†è®ºä¸Šæœ€é€‚åˆå¤„ç†åœ°é¢æ•ˆåº”
- ğŸ“Š é¢„æœŸï¼šæœ€ä½³çš„æ•´ä½“æ€§èƒ½å’Œç¨³å®šæ€§

### è¯„ä»·ç»´åº¦

1. **ç¨³å®šæ€§æ’åº**: é€šå¸¸ ADRC > UDE > PID
2. **ç²¾åº¦æ’åº**: å–å†³äºå‚æ•°è°ƒèŠ‚ï¼Œå¯èƒ½æœ‰å˜åŒ–
3. **å“åº”é€Ÿåº¦**: é€šå¸¸ PID > UDE â‰ˆ ADRC
4. **é²æ£’æ€§**: ADRC > UDE > PID

## ğŸ”§ é«˜çº§ä½¿ç”¨

### è‡ªå®šä¹‰è¯„ä»·æŒ‡æ ‡

ä¿®æ”¹Pythonè„šæœ¬ä¸­çš„`analyze_current_experiment()`å‡½æ•°æ¥æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡ã€‚

### æ‰¹é‡å®éªŒ

```bash
#!/bin/bash
# æ‰¹é‡è¿è¡Œå¤šä¸ªåœºæ™¯

scenarios=("slow_landing" "fast_landing" "precision_test" "robustness_test")

for scenario in "${scenarios[@]}"; do
    echo "Running $scenario experiment..."
    # æ ¹æ®scenarioåŠ è½½å¯¹åº”å‚æ•°å¹¶è¿è¡Œå®éªŒ
    roslaunch hx_demo ground_effect_experiment.launch # åŠ ç›¸åº”å‚æ•°
    sleep 5  # ç­‰å¾…å®éªŒå®Œæˆ
done
```

### å®æ—¶ç›‘æ§

```bash
# å®æ—¶æŸ¥çœ‹å®éªŒæ•°æ®
rostopic echo /Drone1/hx_uav/state
rostopic echo /Drone1/hx_uav/controller_output

# æŸ¥çœ‹å®éªŒè¿›åº¦
tail -f ground_effect_data/ground_effect_report_*.txt
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ— äººæœºä¸é™è½**
   - æ£€æŸ¥é™è½é€Ÿåº¦è®¾ç½®æ˜¯å¦è¿‡å°
   - ç¡®è®¤AirSimç‰©ç†å‚æ•°æ­£ç¡®

2. **æ•°æ®æ–‡ä»¶ä¸ºç©º**
   - æ£€æŸ¥æ–‡ä»¶æƒé™
   - ç¡®è®¤Pythonä¾èµ–ï¼ˆpandas, matplotlibï¼‰å·²å®‰è£…

3. **æ§åˆ¶å™¨åˆ‡æ¢å¤±è´¥**
   - æ£€æŸ¥æ§åˆ¶å™¨å‚æ•°é…ç½®
   - ç¡®è®¤ROSè¯é¢˜è¿æ¥æ­£å¸¸

4. **å®éªŒä¸­æ–­**
   - ä½¿ç”¨`Ctrl+C`å®‰å…¨åœæ­¢
   - éƒ¨åˆ†ç»“æœä»ä¼šä¿å­˜åˆ°æ•°æ®æ–‡ä»¶

### å‚æ•°è°ƒèŠ‚å»ºè®®

- **é™è½é€Ÿåº¦è¿‡å¿«**: å‡å°`landing_speed`å‚æ•°
- **åœ°é¢æ•ˆåº”ä¸æ˜æ˜¾**: é™ä½`takeoff_height`æˆ–å‡å°`landing_speed`  
- **æ•°æ®é‡‡é›†ä¸è¶³**: å¢åŠ `hover_duration`å‚æ•°
- **æ§åˆ¶å™¨ä¸ç¨³å®š**: æ£€æŸ¥æ§åˆ¶å™¨å‚æ•°é…ç½®

## ğŸ“Š ç»“æœè§£è¯»æŒ‡å¯¼

### ä¼˜ç§€è¡¨ç°æŒ‡æ ‡

- æ°´å¹³æ¼‚ç§» < 0.2m
- é«˜åº¦è¯¯å·® < 0.1m  
- é€Ÿåº¦è¯¯å·® < 0.1m/s
- æ§åˆ¶å‘½ä»¤æ ‡å‡†å·® < 0.1rad

### æ€§èƒ½å¯¹æ¯”æ–¹æ³•

1. **å®šé‡å¯¹æ¯”**: ä½¿ç”¨ç”Ÿæˆçš„æ•°å€¼æŒ‡æ ‡
2. **å®šæ€§è§‚å¯Ÿ**: è§‚çœ‹å®é™…é£è¡Œè¿‡ç¨‹
3. **ç»Ÿè®¡åˆ†æ**: å¤šæ¬¡å®éªŒå–å¹³å‡å€¼
4. **å¯è§†åŒ–åˆ†æ**: æŸ¥çœ‹ç”Ÿæˆçš„å¯¹æ¯”å›¾è¡¨

---

**å¼€å§‹ä½ çš„åœ°é¢æ•ˆåº”æ§åˆ¶å™¨æ€§èƒ½è¯„ä¼°å®éªŒï¼** ğŸš

é€šè¿‡è¿™ä¸ªå®éªŒï¼Œä½ å°†æ·±å…¥äº†è§£ä¸åŒæ§åˆ¶ç®—æ³•åœ¨å¤æ‚é£è¡Œç¯å¢ƒä¸‹çš„æ€§èƒ½å·®å¼‚ï¼Œä¸ºå®é™…åº”ç”¨é€‰æ‹©æœ€é€‚åˆçš„æ§åˆ¶ç­–ç•¥ã€‚